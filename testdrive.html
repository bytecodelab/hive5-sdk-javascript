<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hive5 TestDrive</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/paper/bootstrap.min.css">
	<script src="./hive5.js"></script>
    <style>
      .well { overflow:scroll; }
      .anchor { padding-top:90px; margin-top:-90px; }
      pre { margin:0px;border:0px;padding:0px;background:transparent; }
    </style>
  </head>
  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-2">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">TestDrive</a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-2">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a href="#Hive5.Auth" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Auth <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#Hive5.Auth.login">login</a></li>
                <li><a href="#Hive5.Auth.delete">delete</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#Hive5.Settings" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Settings <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#Hive5.Settings.checkNicknameAvailability">checkNicknameAvailability</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#Hive5.Script" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Script <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#Hive5.Script.runScript">runScript</a></li>
              </ul>
            </li>
          </ul>

          <ul class="nav navbar-nav navbar-right">
            <li><div class="label label-info" id="platform"></div><div id="id"></div></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container" style="margin-top:80px;">
      <h2>Hive5 Javascript SDK
        <button class="btn btn-sm btn-default pull-right" onclick="showInitializer();" id="initializeButton">Re-Initialize</button>
      </h2>
    </div>

    <div class="container" id="initializer">
      <!--
      *
      * Hive5.Initialize
      *
      -->
      <div class="row">
        <div class="col-lg-12">
          <div class="panel panel-primary" id="init-form">
            <div class="panel-heading">
              <h3 class="panel-title">Initialize</h3>
            </div>
            <div class="panel-body">
              <div class="form-group">
                <input class="form-control host" placeholder="Host" value="http://alpha.hornet.hive5.io"/>
                <input class="form-control app-key" placeholder="App Key" value="d8444735-15e3-4198-9179-102ba68776fc"/>
                <input class="form-control uuid" placeholder="Device Id(UDID)" value="testdevice4" />
              </div>
              <div class="form-group">
                <button class="form-control btn btn-sm btn-success submit">Initialize</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container" id="function-tests">
      <!--
      *
      * Hive5.Auth
      *
      -->
      <div class="row">
        <div class="col-lg-12">
          <a name="Hive5.Auth"></a>
          <div class="panel panel-danger">
            <div class="panel-heading">
              <h3 class="panel-title">Hive5.Auth</h3>
            </div>
            <div class="panel-body">

              <!-- Hive5.Auth.login -->
              <div class="col-lg-6">
                <a class="anchor" name="Hive5.Auth.login"></a>
                <div class="panel panel-default" id="auth-login">
                  <div class="panel-heading">Hive5.Auth.login</div>
                  <div class="panel-body">
                    <div class="form-group">
                      <input class="form-control os" placeholder="os" value="ios"/>
                      <input class="form-control build" placeholder="build" value="1.0.0"/>
                      <input class="form-control locale" placeholder="locale" value="en-US"/>
                      <input class="form-control platform" placeholder="platform" />
                      <input class="form-control id" placeholder="id" />
                    </div>
                    <div class="form-group">
                      <button class="form-control btn btn-sm btn-primary submit">
                        <span class="glyphicon glyphicon-ice-lolly-tasted"></span> Run
                      </button>
                    </div>
                  </div>
                  <div class="panel-body">
                    <div class="output well"></div>
                  </div>
                </div>
              </div>
              <!-- Hive5.Auth.login end -->

              <!-- Hive5.Auth.delete -->
              <div class="col-lg-6">
                <a class="anchor" name="Hive5.Auth.delete"></a>
                <div class="panel panel-default" id="auth-delete">
                  <div class="panel-heading">Hive5.Auth.delete</div>
                  <div class="panel-body">
                    <button class="form-control btn btn-sm btn-primary submit">
                      <span class="glyphicon glyphicon-ice-lolly-tasted"></span> Run
                    </button>
                  </div>
                  <div class="panel-body">
                    <div class="output well"></div>
                  </div>
                </div>
              </div>
              <!-- Hive5.Auth.delete end -->

            </div>
          </div>
        </div>
      </div>
      <!-- Hive5.Auth end -->

      <!--
      *
      * Hive5.Leaderboard
      *
      -->
      <div class="row">
        <div class="col-lg-12">
          <a name="Hive5.Leaderboard"></a>

          <div class="panel panel-warning">
            <div class="panel-heading">
              <h3 class="panel-title">Hive5.Leaderboard</h3>
            </div>
            <div class="panel-body">

              <!-- Hive5.Leaderboard.submitScores -->
              <div class="col-lg-6">
                <a class="anchor" name="Hive5.Leaderboard.submitScores"></a>

                <div class="panel panel-default" id="leaderboard-submitscore">
                  <div class="panel-heading">Hive5.Leaderboard.submitScores</div>
                  <div class="panel-body">
                    <div class="form-group">
                      <input class="form-control score" placeholder="Score"/>
                    </div>
                    <div class="form-group">
                      <input class="form-control extras" placeholder="Extras"/>
                    </div>
                    <div class="form-group">
                      <button class="form-control btn btn-sm btn-primary submit">
                        <span class="glyphicon glyphicon-ice-lolly-tasted"></span> Run
                      </button>
                    </div>
                  </div>
                  <div class="panel-body">
                    <div class="output well"></div>
                  </div>
                </div>
              </div>
              <!-- Hive5.Leaderboard.submitScores end -->

              <!-- Hive5.Leaderboard.getMyScore -->
              <div class="col-lg-6">
                <a class="anchor" name="Hive5.Leaderboard.getMyScore"></a>

                <div class="panel panel-default" id="leaderboard-getmyscore">
                  <div class="panel-heading">Hive5.Leaderboard.getMyScore</div>
                  <div class="panel-body">
                    <div class="form-group">
                      <button class="form-control btn btn-sm btn-primary submit">
                        <span class="glyphicon glyphicon-ice-lolly-tasted"></span> Run
                      </button>
                    </div>
                  </div>
                  <div class="panel-body">
                    <div class="output well"></div>
                  </div>
                </div>
              </div>
              <!-- Hive5.Leaderboard.getMyScore end -->

              <!-- Hive5.Leaderboard.getScores -->
              <div class="col-lg-6">
                <a class="anchor" name="Hive5.Leaderboard.getScores"></a>

                <div class="panel panel-default" id="leaderboard-getscores">
                  <div class="panel-heading">Hive5.Leaderboard.getScores</div>
                  <div class="panel-body">
                    <div class="form-group">
                      <button class="form-control btn btn-sm btn-primary submit">
                        <span class="glyphicon glyphicon-ice-lolly-tasted"></span> Run
                      </button>
                    </div>
                  </div>
                  <div class="panel-body">
                    <div class="output well"></div>
                  </div>
                </div>
              </div>
              <!-- Hive5.Leaderboard.getScores end -->

              <!-- Hive5.Leaderboard.getSocialScores -->
              <div class="col-lg-6">
                <a class="anchor" name="Hive5.Leaderboard.getSocialScores"></a>

                <div class="panel panel-default" id="leaderboard-getsocialscores">
                  <div class="panel-heading">Hive5.Leaderboard.getsocialscores</div>
                  <div class="panel-body">
                    <div class="form-group">
                      <button class="form-control btn btn-sm btn-primary submit">
                        <span class="glyphicon glyphicon-ice-lolly-tasted"></span> Run
                      </button>
                    </div>
                  </div>
                  <div class="panel-body">
                    <div class="output well"></div>
                  </div>
                </div>
              </div>
              <!-- Hive5.Leaderboard.getSocialScores end -->

            </div>
          </div>
        </div>
      </div>
      <!-- Hive5.Leaderboard end -->


      <!--
      *
      * Hive5.Settings
      *
      -->
      <div class="row">
        <div class="col-lg-12">
          <a name="Hive5.Settings"></a>
          <div class="panel panel-warning">
            <div class="panel-heading">
              <h3 class="panel-title">Hive5.Settings</h3>
            </div>
            <div class="panel-body">

              <!-- Hive5.Settings.checkNicknameAvailability -->
              <div class="col-lg-6">
                <a class="anchor" name="Hive5.Settings.checkNicknameAvailability"></a>
                <div class="panel panel-default" id="settings-checknicknameavailability">
                  <div class="panel-heading">Hive5.Settings.checkNicknameAvailability</div>
                  <div class="panel-body">
                    <div class="form-group">
                      <input class="form-control nickname" placeholder="Nickname" />
                    </div>
                    <div class="form-group">
                      <button class="form-control btn btn-sm btn-primary submit">
                        <span class="glyphicon glyphicon-ice-lolly-tasted"></span> Run
                      </button>
                    </div>
                  </div>
                  <div class="panel-body">
                    <div class="output well"></div>
                  </div>
                </div>
              </div>
              <!-- Hive5.Settings.checkNicknameAvailability end -->

            </div>
          </div>
        </div>
      </div>
      <!-- Hive5.Settings end -->

      <!--
      *
      * Hive5.Script
      *
      -->
      <div class="row">
        <div class="col-lg-12">
          <a name="Hive5.Script"></a>
          <div class="panel panel-danger">
            <div class="panel-heading">
              <h3 class="panel-title">Hive5.Script</h3>
            </div>
            <div class="panel-body">

              <!-- Hive5.Script.runScript -->
              <div class="col-lg-6">
                <a class="anchor" name="Hive5.Script.runScript"></a>
                <div class="panel panel-default" id="script-runscript">
                  <div class="panel-heading">Hive5.Script.runScript</div>
                  <div class="panel-body">
                    <div class="form-group">
                      <input class="form-control script-name" placeholder="Script Name" value="echo"/>
                    </div>
                    <div class="form-group">
                      <input class="form-control script-params" placeholder="Parameters(JSON)" value='{ "echo": "abcd" }'/>
                    </div>
                    <div class="form-group">
                      <button class="form-control btn btn-sm btn-primary submit">
                        <span class="glyphicon glyphicon-ice-lolly-tasted"></span> Run
                      </button>
                    </div>
                  </div>
                  <div class="panel-body">
                    <div class="output well"></div>
                  </div>
                </div>
              </div>
              <!-- Hive5.Script.runScript end -->

            </div>
          </div>
        </div>
      </div>
      <!-- Hive5.Settings end -->

    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script>

      /*
       *
       * Common
       *
       */
      function outputLog(logPlaceId, logContent) {
        var outputContent = "";
        try {
          outputContent = "<pre>"+JSON.stringify(JSON.parse(logContent), null, 2)+"</pre>";
        } catch (ex) {
          outputContent = logContent;
        }

        var now = new Date();
        var dateTimeHtml = '<br><div class="label label-default">'+now.toDateString() + ' ' + now.toTimeString() +'</div>';
        $(logPlaceId).html(outputContent + dateTimeHtml);
      }

      function clearUserInfo()
      {
        $('#platform').html("");
        $('#id').html("");
      }

      /*
       *
       * Init
       *
       */

      function showInitializer() {
        $('#function-tests').hide();
        $('#initializer').show();
        $('#initializeButton').hide();
      }

      $('#init-form .submit').on("click", function () {
        if (!$('#init-form .host').val()) {
          alert("Host cannot be emtpy!");
          $('#init-form .host').focus();
          return false;
        }

        if (!$('#init-form .app-key').val()) {
          alert("App Key cannot be emtpy!");
          $('#init-form .app-key').focus();
          return false;
        }

        if (!$('#init-form .uuid').val()) {
          alert("Device Id cannot be emtpy!");
          $('#init-form .uuid').focus();
          return false;
        }


        Hive5.initialize($('#init-form .host').val(),
                $('#init-form .app-key').val(),
                $('#init-form .uuid').val());

        $('#initializer').hide();
        $('#function-tests').show();
        $('#initializeButton').show();

        return false;
      });

      /*
       *
       * Auth
       *
       */
      $('#auth-login .submit').on("click", function () {
        var logPlace = '#auth-login .output';
        var p = Hive5.Auth.login($('#auth-login .os').val(),
                $('#auth-login .build').val(),
                $('#auth-login .locale').val(),
                $('#auth-login .platform').val(),
                $('#auth-login .id').val());

        p.then(function(response) {
          outputLog(logPlace, response.raw);

          var jsonData = JSON.parse(response.raw);
          $('#platform').html(jsonData.user.platform);
          $('#id').html(jsonData.user.id);

        }).catch(function (response) {
          outputLog(logPlace, response.raw);
        });
      });

      $('#auth-delete .submit').on("click",  function () {
        var logPlace = '#auth-delete .output';

        var p = Hive5.Auth.delete();
        p.then(function(response) {
          outputLog(logPlace, response.raw);

          clearUserInfo();
        }).catch(function (response) {
          outputLog(logPlace, response.raw);
        });
      });

      /*
       *
       * Leaderboard
       *
       */
      $('#leaderboard-submitscore .submit').on("click", function () {
        var logPlace = '#leaderboard-submitscore .output';

        if (!$('#leaderboard-submitscore .score').val()) {
          alert("score cannot be null!");
          $('#leaderboard-submitscore .score').focus();
          return;
        }

        var p = Hive5.Leaderboard.submitScore("leader1", JSON.parse($('#leaderboard-submitscore .score').val()),
          JSON.parse($('#leaderboard-submitscore .extras').val()));
        p.then(function (response) {
          outputLog(logPlace, response.raw);
        }).catch(function (response) {
          outputLog(logPlace, response.raw);
        });
      });

      $('#leaderboard-getmyscore .submit').on("click", function () {
        var logPlace = '#leaderboard-getmyscore .output';

        var p = Hive5.Leaderboard.getMyScore("leader1");
        p.then(function (response) {
          outputLog(logPlace, response.raw);
        }).catch(function (response) {
          outputLog(logPlace, response.raw);
        });
      });

      $('#leaderboard-getscores .submit').on("click", function () {
        var logPlace = '#leaderboard-getscores .output';

        var p = Hive5.Leaderboard.getScores("leader1", 1, 10, ["user", "hero"]);
        p.then(function (response) {
          outputLog(logPlace, response.raw);
        }).catch(function (response) {
          outputLog(logPlace, response.raw);
        });
      });

      $('#leaderboard-getsocialscores .submit').on("click", function () {
        var logPlace = '#leaderboard-getsocialscores .output';

        var p = Hive5.Leaderboard.getSocialScores("leader1", ["user", "hero"]);
        p.then(function (response) {
          outputLog(logPlace, response.raw);
        }).catch(function (response) {
          outputLog(logPlace, response.raw);
        });
      });

      /*
       *
       * Settings
       *
       */
      $('#settings-checknicknameavailability .submit').on("click", function() {
        var logPlace = '#settings-checknicknameavailability .output';

        if (!$('#settings-checknicknameavailability .nickname').val()) {
          alert("Nickname cannot be null!");
          $('#settings-checknicknameavailability .nickname').focus();
          return;
        }

        var p = Hive5.Settings.checkNicknameAvailability($('#settings-checknicknameavailability .nickname').val());
        p.then(function(response) {
          outputLog(logPlace, response.raw);
        }).catch(function (response) {
          outputLog(logPlace, response.raw);
        });
      });

      /*
       *
       * Script
       *
       */
      $('#script-runscript .submit').on("click", function ()
      {
        if (!$('#script-runscript .script-name').val()) {
          alert('Script Name cannot be empty!');
          $('#script-runscript .script-name').focus();
          return;
        }

        var logPlace = '#script-runscript .output';
        var p = Hive5.Script.runScript($('#script-runscript .script-name').val(),
                $('#script-runscript .script-params').val());
        p.then(function(response) {
          outputLog(logPlace, response.raw);
        }).catch(function (response) {
          outputLog(logPlace, response.raw);
        });
      });

      /* post script */
      showInitializer();
    </script>
  </body>
</html>
